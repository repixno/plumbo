// Created 11/6/2013 5:00:20 PM
var el={canvas:{},cTest:!1,id:function(a){return document.getElementById(a)},tag:function(a){return document.getElementsByTagName(a)[0]},tags:function(a){return document.getElementsByTagName(a)},add:function(a){return document.createElement(a)},del:function(a){browser.publisher.isOn?fbUtils.isString(a)?null!=document.getElementById(a)&&el.id(a).parentNode.removeChild(el.id(a)):a.parentNode.removeChild(a):fbUtils.isString(a)?el.id(a)&&el.id(a).parentNode.removeChild(el.id(a)):a.parentNode.removeChild(a)},
Class:function(a){return document.getElementsByClassName(tag)},createElement:function(a,b,c,e){c=c||-1;a=document.createElement(a);for(var d in b)if("styles"!=d)a.setAttribute(d,b[d]);else{var f=void 0;for(f in b.styles)a.style[f]=b.styles[f]}for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);-1!=c&&(fbUtils.isString(c)?document.getElementById(c).appendChild(a):c.appendChild(a));return a},clear:function(a){fbUtils.isString(a)&&(a=a.id(a));a.innerHTML=""}},fbUtils={SPLITTERS:[",",";","."," ","?","!","'",
'"',"",String.fromCharCode(10),String.fromCharCode(13),String.fromCharCode(8211),String.fromCharCode(8212),String.fromCharCode(8722),String.fromCharCode(8209),String.fromCharCode(8208)],split:function(a,b){for(var c=a.split(" "),e=[],d=0;d<c.length;d++)c[d].length>=b&&e.push(c[d]);return e},isSplitter:function(a){for(var b=0;b<this.SPLITTERS.length;b++)if(a==this.SPLITTERS[b])return!0;return!1},getNum:function(a){var b="000"+a;9<a&&(b="00"+a);99<a&&(b="0"+a);999<a&&(b=""+a);return b},hexToRGB:function(a){function b(a){return"#"==
a.charAt(0)?a.substring(1,7):a}var c=parseInt(b(a).substring(0,2),16),e=parseInt(b(a).substring(2,4),16);a=parseInt(b(a).substring(4,6),16);return c+","+e+","+a},findArr:function(a,b){for(i in a)if(1*a[i]===1*b)return i},getMaxZoom:function(a,b){return Math.sqrt(52E5/(a*b))},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},
screening:function(a){return a.replace(/</ig,function(a){return"&lt;"})},formatPrice:function(a){a=parseFloat((a+"").replace(publicationData.shopInfo.currency.decimalSeparator,".").replace(/[^0-9\.]+/ig,"")).toFixed(publicationData.shopInfo.currency.accuracy);var b=a.split(".");a=b[1];b=b[0];b=this.chunk(b.reverse(),3).join(publicationData.shopInfo.currency.thousandsDelimiter).reverse();a=publicationData.shopInfo.hideZeroDecimals&&0==a?b:b+publicationData.shopInfo.currency.decimalSeparator+a;return a=
publicationData.shopInfo.currency.placeSymbolAfterPrice?a+""+publicationData.shopInfo.currency.symbol:publicationData.shopInfo.currency.symbol+""+a},chunk:function(a,b){"undefined"===typeof b&&(b=2);return a.match(RegExp(".{1,"+b+"}","g"))||[]},objectSize:function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}};String.prototype.reverse=function(){return this.split("").reverse().join("")};
var iOS7LandscapeHeightBugFix=function(){"7"===system.device.version&&(el.id("body").style.height=window.innerHeight+"px",scrollTo(0,document.documentElement.getBoundingClientRect().top),"undefined"!==typeof customEvents&&"mobile"===system.device.type&&customEvents.fireEvent(ROTATE_DEVICE,orientationObserver.typeBook))},generatePreloader=function(){var a=el.createElement("div",{id:"mainPreloaderDiv",styles:{width:"100%",height:"100%","z-index":"1000000","background-color":"#"+BG_COLOR,opacity:"1",
position:"absolute","-webkit-transition-duration":"300ms","-webkit-transition-delay":"500ms"}},"body"),b=el.createElement("div",{styles:{position:"absolute","text-align":"center",width:"200px",height:"200px",top:"50%",left:"50%",opacity:"1",margin:"-100px 0 0 -100px","line-height":"100px"}},a),c=el.createElement("image",{id:"preloaderIMG",styles:{"box-shadow":"0 0 3px rgba(0,0,0,0.5)","-webkit-transform-origin":"50% 50%","-webkit-transform":"scale("+window.devicePixelRatio+","+window.devicePixelRatio+
")"}});c.onload=function(){b.appendChild(this)};c.src=ASSETS_FOLDER+"/thumb.jpg";changeUrlWhenPubl(ASSETS_FOLDER+"/thumb.jpg",function(a){c.src=a},-1==ASSETS_FOLDER.indexOf("static"));var e=document.getElementById("mainPreloaderDiv").style.backgroundColor.match(/\d{1,3}/ig),d="",f;for(f in e)d=2==f?d+Math.abs(155-1*e[f]):d+(155-1*e[f])+",";el.createElement("p",{styles:{position:"absolute",top:"50%",left:"50%",width:"300px",color:"rgb("+d+")","font-family":"Helvetica Neue","font-size":18*window.devicePixelRatio+
"px","line-height":18*window.devicePixelRatio+"px",margin:20*window.devicePixelRatio*window.devicePixelRatio+"px 0px 0px -150px","text-align":"center","text-shadow":"0 0 2px rgba("+d+",0.5)"}},a).appendChild(document.createTextNode(PUBLICATION_NAME))};
function FBRequire(a){var b;this.basePath=a;this.numMods=this.numLoads=0;this.head=document.getElementsByTagName("head")[0];this.load=function(a,e,d){function f(){function f(a){var c;if(!(c=!m)){c=!1;for(var d=b.documentElement.getElementsByTagName("Unit"),e=0;e<d.length;e++){var l=d[e];if(l.getAttribute("FileName")==a.substr(a.lastIndexOf("/")+1)){if(c)throw"module has already loaded";c=!0;l=l.getElementsByTagName("Source");g.numMods+=l.length-1;for(var k=0;k<l.length;k++)h(JAVASCRIPT_FOLDER+"/"+
l[k].getAttribute("FileName"))}}c=!c}c&&h(a)}g.numLoads=0;var h=function(a){var b=document.createElement("script");b.type="text/javascript";b.charset="utf-8";b.async=!0;b.addEventListener("load",function(){g.numLoads++;g.numLoads==g.numMods&&(fbUtils.isFunction(e)?e.call():console.log("FBRequire error: callback function is not a function. Callback:"+e))});b.addEventListener("error",function(){fbUtils.isFunction(d)?d.call():console.log("FBRequire error: errorback function is not a function. Errorback:"+
e)});changeUrlWhenPubl(a,function(a){b.src=a},-1==a.indexOf("static"));g.head.appendChild(b)};if(fbUtils.isArray(a)){g.numMods=a.length;for(var k=0;k<a.length;k++)f(g.basePath+a[k]+".js")}else g.numMods=1,f(g.basePath+a+".js")}var g=this,m="undefined"!=typeof window.DEBUG_MODE&&window.DEBUG_MODE;e=e||function(){};d=d||function(){};if(m)if(b)f();else{var h=new XMLHttpRequest;h.open("GET",JAVASCRIPT_FOLDER+"/!units.xml",!1);h.onreadystatechange=function(){if(4==h.readyState)if(200==h.status)b=h.responseXML,
f();else throw"Status is "+h.status;};h.send(null)}else f()};this.loadCSS=function(a,b,d){var f=this;this.endOfLoads=document.styleSheets.length+a.length;b=b||function(){};d=function(a){var b=document.createElement("link");b.type="text/css";b.rel="stylesheet";changeUrlWhenPubl(a,function(a){b.href=a},-1==a.indexOf("static"));f.head.appendChild(b)};if(fbUtils.isArray(a))for(var g=0;g<a.length;g++)d(a[g]+".css");else d(a+".css");(function(){var a=setInterval(function(){f.endOfLoads==document.styleSheets.length&&
(b.call(),clearInterval(a))},20)})()}}
var load=function(){"undefined"===typeof window.PUBL&&(window.PUBL=!0);el.id("body").innerText="";generatePreloader();var a=new FBRequire(""),b=function(){system=new Detect;"undefined"==typeof publicationData.downloads&&(publicationData.downloads={pageDownlaod:!1,publicationDownload:!1});PUBL&&""!=publicationData.GA?a.load([JAVASCRIPT_FOLDER+"/../../default/ga"],function(){}):PUBL&&a.load([JAVASCRIPT_FOLDER+"/../../default/noga"],function(){});if(system.platform.ios||system.browser.chrome){for(var b=
"user-scalable=no, initial-scale="+1/(window.devicePixelRatio||1)+", maximum-scale="+1/(window.devicePixelRatio||1)+", user-scalable=no",e=document.getElementsByTagName("meta"),d=0;d<e.length;d++)"viewport"==e[d].name&&(e[d].removeAttribute("content"),e[d].setAttribute("content",b));iOS7LandscapeHeightBugFix()}b=function(){DEV="mobile"===system.device.type?"mobile":"tablet";a.load(JAVASCRIPT_FOLDER+("mobile"===DEV?"/mobiledom":system.platform.ios?"/iostdom":"/androidtdom"),function(){PUBL&&system.platform.ios&&
"tablet"==DEV&&6<=system.platform.version[0]&&(publicationData.visibility.downloads=!0);generateDOM();a.load([JAVASCRIPT_FOLDER+"/workspace",JAVASCRIPT_FOLDER+"/common",JAVASCRIPT_FOLDER+"/android",JAVASCRIPT_FOLDER+"/ios"],function(){main();var a=el.id("mainPreloaderDiv");a.style["-webkit-transform"]="translateY(-"+window.innerHeight+"px)";a.addEventListener("webkitTransitionEnd",function(){el.del("mainPreloaderDiv")});a=null;system.device.iphone&&"7"===system.device.version&&setInterval(function(){5<
Math.abs(window.innerHeight-el.id("body").getBoundingClientRect().height)&&iOS7LandscapeHeightBugFix()},500)})})};system.platform.ios?PUBL?a.loadCSS([STYLES_FOLDER+"/style",STYLES_FOLDER+"/indexios",ASSETS_FOLDER+"/textures/iosskin_pbl"],b):a.loadCSS([STYLES_FOLDER+"/style",STYLES_FOLDER+"/indexios",ASSETS_FOLDER+"/textures/iosskin"],b):a.loadCSS([STYLES_FOLDER+"/styleandroid",STYLES_FOLDER+"/indexandroid",ASSETS_FOLDER+"/skin"],b)};a.load([JAVASCRIPT_FOLDER+"/detect",ASSETS_FOLDER+"/properties"],
function(){publicationData.shopInfo?a.load(["undefined"==typeof DEBUG_MODE||!0!=DEBUG_MODE?COMMON_FOLDER+"/ecommerce/cart":JAVASCRIPT_FOLDER+"/../ec/cart",COMMON_FOLDER+"/ecommerce/products"],function(){cart=new Cart(publicationData.shopInfo.id,publicationData.ident);"undefined"!==typeof shopId&&""!==shopId||delete publicationData.shopInfo;b()}):b()})};document.addEventListener("DOMContentLoaded",load);
function changeUrlWhenPubl(a,b,c){PUBL&&("undefined"==typeof c||c)?publ.getFile(a,function(a){b(a.target.responseText)}):b(a)}var publ={getFile:function(a,b){""!=PS&&void 0!=PS&&(a=a+"?password="+PS);""!=USERID&&void 0!=USERID&&(a=a+"?loginTicket="+USERID);var c=new XMLHttpRequest;c.open("GET",a);c.onload=b;c.onerror=function(){};c.send();delete c},getData:function(a,b){publ.getFile(a,function(){var a=new XMLHttpRequest;a.open("GET",this.responseText);a.onload=b;a.onerror=function(){};a.send();delete a})}};
