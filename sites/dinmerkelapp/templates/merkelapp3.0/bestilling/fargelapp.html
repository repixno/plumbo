<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="${i18n/country}" lang="${i18n/country}">

<head>
	<tal metal:use-macro="../../${templates}/common.html/head" />
	<tal metal:use-macro="common.html/head" />
	<link rel="stylesheet" href="/js/bootstrap.colorpickersliders.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="/css/bestilling.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
	<style>
		.pop {
height: 50px; 
width: 108px;   

background-repeat:no-repeat;
}

.backgroundfile{
	height: 50px; 
width: 108px;   

}

	</style>
	
</head>
<body>
<div metal:use-macro="../../${templates}/common.html/top" />


<div class="container editorcontainer">
<div class="content">	
	<div class="row">
		<div class="col-md-12">	
					
	<h3>Fargelapper</h3>				
			<div class="col-md-12">
				<form id="edit">
					<div class="col-md-12">
						<div class="col-md-7 form-horizontal">
							
								<div class="form-group ">
									<label for="line1" class="col-sm-3 control-label visible-lg"><span i18n:translate="">Linje</span> 1:</label>
									<div class="col-sm-9">
										<input type="text" class="form-control" name="line1" id="line1" maxlength="18" placeholder="Feks Fornavn"/>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label visible-lg"><span i18n:translate="">Linje</span> 2:</label>
									<div class="col-sm-9">
										<input type="text" class="form-control" name="line2" maxlength="18" placeholder="Feks Etternavn"/>
									</div>
								</div>
								<div class="form-group">	
									<label class="col-sm-3 control-label visible-lg"><span i18n:translate="">Linje</span> 3:</label>
									<div class="col-sm-9">
										<input type="text"  class="form-control" name="line3" maxlength="18" placeholder="Feks Telefonnummer"/>
									</div>
								</div>
						</div>
						<div class="col-md-5">
							<div class="previewcontainer">
								<!--<p><strong i18n:translate="">Preview:</strong></p>-->
							  <div id="sticker">
								 <img id="preview" class="sticker "  src="/gfx/merkelapp_308.png" />
							  </div>
							</div>
							<div class="top4 ">
								
								<a id="removeall" class="btn btn-info" href="#">Nullstill</a>
								<a id="update" class="btn btn-info" href="#">Oppdater</a>
								<span class="btn btn-info " id="infobutton" >Produktinfo</span>	
									<tal metal:use-macro="common.html/produktinfomodal" />
							</div>
						</div>
                        	
					</div>
			      <br/>		
						
					<div class="col-md-12">
							
						<!--Velge skrift-->
							<div class="col-md-2 col-xs-12  margin54">
							<h5 i18n:translate="">Skrift-type:</h5>
							<div class="selectdiv">
								<label for="font-type" >
								
							<select class="form-control" name="font-type">
								<option value="verdanab">VERDANA</option>
								<option value="arial">ARIAL  &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp</option>
								<option value="comicbd">COMIC </option>
								
							
							</select>
							</label>
						</div>
							
							</div>
							
							<!--Velge farge-->
							
						<div class="col-md-4 col-xs-12 margin54">
							<h5>Tekst Farge</h5>
							<label for="swatchesonly">
							<input type="text" name="font-color"  id="swatchesonly" class="usynlig" value="#4d9ebc" />
							</label>
						</div>
					

			<div class="col-md-6 col-xs-12">
			<tal metal:use-macro="common.html/productlist" />
			<div class="col-md-12 top4 hidden-xs">
				
				<div class="modal fade" id="showReviews" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
					<div class="modal-dialog" role="document">
					  <div class="modal-content">
						<div class="modal-header">
						  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						  <h4 class="modal-title" id="myModalLabel">Anmeldelser</h4>
						</div>
						
					</div>
				  </div>
							
				</div>
			   </div>
			</div>
			
			
			</div>
					
					
		<hr class="visible-xs" />
						
					
					
					<div class="row  col-md-12 col-xs-12">
						<div class="bs-example form-inline">
							<!-- Nav tabs -->
							<ul class="nav nav-tabs nav-pills" role="tablist">
							  <li role="presentation" class="active"><a href="#clipartcontainer" aria-controls="clipartcontainer" role="tab" data-toggle="tab" i18n:translate="" >Clipart</a></li>
							  <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Bakgrunn</a></li>
							  <li role="presentation"><a href="#ownimagecontainer" aria-controls="ownimagecontainer" role="tab" data-toggle="tab">Eget bilde</a></li>
							<li role="presentation"><a href="#pop" aria-controls="pop" role="tab" data-toggle="tab">Populære</a></li>
							</ul>
						<!-- Tab panes -->
							<div class="tab-content">
							  <div role="tabpanel" class="tab-pane active nomargin" id="clipartcontainer">	
								<div>
									<!-- CLIPARTS MERKELAPP -->
									<ul class="nav nav-tabs cattabs" role="tablist">
										<li role="presentation" class="active"><a href="#Dyr" aria-controls="dyr" role="tab" data-toggle="tab">Dyr</a></li>
										<li role="presentation"><a href="#Transport" aria-controls="Transport" role="tab" data-toggle="tab">Transport</a></li>
											<li role="presentation"><a href="#Monster" aria-controls="Monster" role="tab" data-toggle="tab">Monster</a></li>
										<li role="presentation"><a href="#Symboler" aria-controls="Symboler" role="tab" data-toggle="tab">Symboler</a></li>
										<li role="presentation"><a href="#Sommerfugler" aria-controls="Sommerfugler" role="tab" data-toggle="tab">Sommerfugler</a></li>
										<li role="presentation"><a href="#Smileys" aria-controls="Smileys" role="tab" data-toggle="tab">Smileys</a></li>
									
										<li role="presentation"><a href="#Leker" aria-controls="Leker" role="tab" data-toggle="tab">Leker</a></li>
										<li role="presentation"><a href="#Sport" aria-controls="sport" role="tab" data-toggle="tab">Sport</a></li>
											<li role="presentation"><a href="#Blomster" aria-controls="blomster" role="tab" data-toggle="tab">Blomster</a></li>

									</ul>
									<!-- KATEGORIER CLIPARTS -->
									<div class="tab-content">
										<div role="tabpanel" class="clips tab-pane active" id="Dyr"></div>
										<div role="tabpanel" class="clips tab-pane" id="Transport"></div>
										<div role="tabpanel" class="clips tab-pane" id="Monster"></div>
										<div role="tabpanel" class="clips tab-pane" id="Symboler"></div>
										<div role="tabpanel" class="clips tab-pane" id="Sommerfugler"></div>
										<div role="tabpanel" class="clips tab-pane" id="Smileys"></div>
										
										<div role="tabpanel" class="clips tab-pane" id="Leker"></div>
										<div role="tabpanel" class="clips tab-pane" id="Sport"></div>
											<div role="tabpanel" class="clips tab-pane" id="Blomster"></div>
									</div>
								</div>
								<!--<div id="clipart"></div>-->
							</div>
							  
							<!-- BACKGROUND MERKELAPP -->
							<div role="tabpanel" class="tab-pane nomargin" id="profile">	
								<div>
									<!-- KATEGORIER BACKGROUND -->		
									<ul class="nav nav-tabs cattabs" role="tablist">
										<li role="presentation" class="active"><a href="#BGdyr" aria-controls="dyr" role="tab" data-toggle="tab">Dyr</a></li>
										<li role="presentation"><a href="#BGEnsfarget" aria-controls="BGEnsfarget" role="tab" data-toggle="tab">Ensfarget</a></li>
											<li role="presentation"><a href="#BGOverganger" aria-controls="BGOverganger" role="tab" data-toggle="tab">Overganger</a></li>
											<li role="presentation" ><a href="#BGmonster" aria-controls="monster" role="tab" data-toggle="tab">Mønster</a></li>
											<li role="presentation" ><a href="#BGTransport" aria-controls="Transport" role="tab" data-toggle="tab">Transport</a></li>
											<li role="presentation" ><a href="#BGsymboler" aria-controls="BGsymboler" role="tab" data-toggle="tab">Symboler</a></li>
										<li role="presentation"><a href="#BGBlomster" aria-controls="BGBlomster" role="tab" data-toggle="tab">Blomster</a></li>
										
									</ul>
						
									<div class="tab-content">
										<div role="tabpanel" class="backgrounds tab-pane active" id="BGdyr" data-cat="dyr"></div>
											<div role="tabpanel" class="backgrounds tab-pane" id="BGOverganger" data-cat="Overganger"></div>
													<div role="tabpanel" class="backgrounds tab-pane" id="BGTransport" data-cat="Transport"></div>
											<div role="tabpanel" class="backgrounds tab-pane" id="BGmonster" data-cat="monster"></div>
												<div role="tabpanel" class="backgrounds tab-pane" id="BGsymboler" data-cat="symboler"></div>
										<div role="tabpanel" class="backgrounds tab-pane" id="BGEnsfarget" data-cat="Ensfarget"></div>
										<div role="tabpanel" class="backgrounds tab-pane" id="BGBlomster" data-cat="Blomster"></div>
												
								
									</div>
										
							</div>
								<div id="background"></div>
						 </div>
								
								
								<!-- EGET BILDE-->
							  <div role="tabpanel" class="tab-pane" id="ownimagecontainer">
									<div class="row span4 text-left" style="margin-left: 0px;">
										<span class="btn btn-primary fileinput-button" style=" width:120px;">
											<span>Velg bilde</span>
											<!-- The file input field used as target for the file upload widget -->
											<input id="fileupload" type="file" name="files[]"  data-url="/api/1.0/merkelapp/upload2" accept="image/jpeg"  />
										</span>
									</div>
									<div id="progress" class="progress">
										<div class="progress-bar progress-bar-success"></div>
									</div>
									
									<div class="preimage">
									  <div tal:content="structure cms:body:e42122ba-e45a-40d3-beff-8d0c0870a8fb"/>
									  </div>
									<div class="pastimage row" style="display: none">
										<div class="col-md-6" id="imagecontainer"/>
										<div class="col-md-6 text-right">
											<a id="removeimg" class="btn btn-primary"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span><span i18n:translate="">Remove image</span></a>
										</div>
									</div>
									<input type="hidden" name="image" value="" />
									<input type="hidden" name="imagemode" value="color" />
							  </div>
							  
							  
							  
							  
							 <div role="tabpanel" class="tab-pane nomargin" id="pop">
						<div class="tab-content">
						 <div role="tabpanel" class="backgrounds tab-pane active" id="BGpop" data-cat="pop">
							
							<button class="pop" style="background: url(/tmp/popular/lapp2.png)" data-bg="dyr-hundorange.jpg" data-clipart="Dyr-21.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp1.png)" data-bg="Ensfarget-lysbrun.jpg" data-clipart="Dyr-20.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp3.png)" data-bg="Ensfarget-sjøgrønn.jpg" data-clipart="Monster-016.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp4.png)" data-bg="Ensfarget-grågrønn.jpg" data-clipart="Monster-003.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp5.png)" data-bg="Ensfarget-blå.jpg" data-clipart="Dyr-luna.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp6.png)" data-bg="Ensfarget-turkis.jpg" data-clipart="Dyr-22.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp7.png)" data-bg="Ensfarget-offwhite.jpg" data-clipart="Dyr-8.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp8.png)" data-bg="Ensfarget-gråblå.jpg" data-clipart="Leker-prinsessekrone.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp9.png)" data-bg="dyr-sporhimmelblå.jpg" data-clipart="Dyr-27.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp10.png)" data-bg="Ensfarget-lysgrå.jpg" data-clipart="Dyr-1.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp11.png)" data-bg="Ensfarget-grågrønn.jpg" data-clipart="Dyr-28.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp12.png)" data-bg="Ensfarget-himmelblå.jpg" data-clipart="Monster-032.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp13.png)" data-bg="Ensfarget-himmelblå.jpg" data-clipart="Monster-005.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp14.png)" data-bg="Ensfarget-turkis.jpg" data-clipart="Transport-025.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp15.png)" data-bg="Transport-bilhimmelblå.jpg" data-clipart="Transport-2.png"></button>
							<button class="pop"  style="background: url(/tmp/popular/lapp16.png)" data-bg="Ensfarget-mint.jpg" data-clipart="Monster-001.png"></button>
								<button class="pop"  style="background: url(/tmp/popular/lapp17.png)" data-bg="Ensfarget-sennep.jpg" data-clipart="Transport-traktor.png"></button>
									<button class="pop"  style="background: url(/tmp/popular/lapp18.png)" data-bg="symboler-hjertegul.jpg" data-clipart="Leker-027.png"></button>
						 </div>
						 
						</div>
									<div id="background"></div>
							  </div>

							  
							</div>
						  </div>
					</div>
				</form>		
			</div>
			
		</div>
	  

	</div>
</div>
</div>

<div class="container">

<div metal:use-macro="../../${templates}/common.html/footer" />

</div>


<SCRIPT type="text/javascript">
   var clipart = '';
   var ownimage = '';
   var treshhold = 60;
   var imageselection = Object();
   var projectid = ${projectid};
   var gravity = 'center'; 
   var category = 'Dyr';
   var backgroundcat = '';
   var backgroundfile = '';
   var totalprice = ${cart/totalprice};
   var staticroot = "/";
   var type = 'fargelapp';
   var disabled = true;
   var alertmessage = 'false';
   var colormode = 'color';
   var ownimageratio = '1:1';
   var msie = null;

   
</SCRIPT>
<script type="text/javascript" src="/js/merkelapp.js"></script>
<script src="${static:}js/jqupload/js/vendor/jquery.ui.widget.js?${version}"></script>
<script src="${static:}js/jqupload/js/jquery.iframe-transport.js?${version}"></script>
	<!-- The basic File Upload plugin -->
<script src="${static:}js/jqupload/js/jquery.fileupload.js?${version}"></script>
<script type="text/javascript" src="/js/imgareaselect.js"></script>
<!--<script type="text/javascript" src="/js/dm3_merkelapp.js"></script>-->


<script src="/js/tinycolor.js"></script>
<script src="/js/bootstrap.colorpickersliders.js"></script>
<script type="text/javascript">/*<![CDATA[*/

	
	
		$( function(){
			
			
			
			
		
			

		
		$(document).on( 'click', '.lipscore-rating-review-link', function(){$('#showReviews').modal('toggle');});		
		
		showloader();
	
	      $('#fileupload').fileupload({
				replaceFileInput: false,
				dataType: "json",        
				datatype:"json",
				xhrFields: {withCredentials: true},
				acceptFileTypes: /(\.|\/)(jpe?g|tif)$/i,
				add: function (e, data) {
					
					console.log(e);
					console.log(data);
					
					data.context = $('<p id="uploading" style="position: absolute; left: 20px;"/>').text('Uploading...').appendTo($('.progress-bar'));
					data.submit();
					
				},
				done: function (e, data) {
					
					file = data.result.files;
					
					$('#uploading').remove();
					
						
                        $('#ownimage').imgAreaSelect({
                             remove: true
                         });
                         
                         
                         
                         ownimage = file.filename;
                         $('input[name$="image"]').val(file.filename);
            
                         $('#ownimage').remove();
                         $('.preimage').remove();
                         $('.pastimage').show();
                         $('#imagecontainer').append('<img  id="ownimage" alt="image" src="/streams/merkelapp/' + file.filename + '" />');
                         //$('#ownimage').attr( 'src' , '/streams/merkelapp/' + res.filename );
            
                         $('#ownimage').load(function () {
            
                             $('#ownimage').imgAreaSelect({
                                 handles: true,
                                 aspectRatio: '1:1',
                                 x1: 50,
                                 y1: 50,
                                 x2: 150,
                                 y2: 150,
                                 onInit: function (img, selection) {
                                     imageselection = {
                                         selection: selection,
                                         imgx: img.width,
                                         imgy: img.height
                                     }
                                     update();
                                 },
                                 onSelectEnd: function (img, selection) {
                                     imageselection = {
                                         selection: selection,
                                         imgx: img.width,
                                         imgy: img.height
                                     };
                                     update();
                                 }
                             });
            
                         });
                        
				},
				progressall: function (e, data) {
					var progress = parseInt(data.loaded / data.total * 100, 10);
					$('.progress .progress-bar-success').css(
						'width',
						progress + '%'
					);
				}
			});
	
	
        $("input#swatchesonly").ColorPickerSliders({
          placement: 'bottom',
          previewformat: 'hex',
		  customswatches: false,
		  flat: true,
		  swatches:["#000000", "#5c5c69",  "#ffffff", "#0000ff",   "#00ccff", "#315681", "#1a7ae8", "#6699cc", "#330066", "#663399",  "#990099", "#ff00ff",   "#f4178a", "#ff0000", "#ca1111" , "#ffd535", "#ff7800" ,"#008000" ,"#12ff00"  ,"#6bbd48" ],
		  sliders: false,
		  onchange: function(container, color) {
                update();
            }
        });
		
			updatetotal();
		$( document ).scroll(function(ret) {
					if( $(document).width() < 768 ){
						var offsety = ret.currentTarget.body.scrollTop;
						if( offsety < 51 ){
							$('.previewcontainer').css('top', ( 90 - offsety ) + 'px');
						}
						else{
							$('.previewcontainer').css('top', '0px');
						}
					
					}
				  });
		
		$( window ).load(function() {
			hideloader();
		  });
	});
		
		
		
		
		// Get the modal
var modal = document.getElementById('myModal');
var modal = document.getElementById('produktinfomodal');

// Get the button that opens the modal
var btn = document.getElementById("infobutton");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}





	
/*]]>*/	
</script>




</body>
</html>